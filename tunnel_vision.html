<html>
    <body>
        <hr>
        <p><i>I do not like work even when someone else does it.</i> -- MT</p>
        <hr>
        <hr>
        <br>
        <input type="number" id="max_text" min="20" max="5000" placeholder="150"> memory length (20-5000 chars)</input>
        <br>
        <textarea id="text_box" rows=2 cols=50></textarea>
        <script>
            var hiddenText = "";
            document.getElementById("max_text").defaultValue = "150";
            function collectInput(maxText) {
                if(maxText < 0) {
                    var maxTextInput = document.getElementById("max_text");
                    if(maxTextInput.value < maxTextInput.min || maxTextInput.value > maxTextInput.max) {
                        maxTextInput.value = maxTextInput.defaultValue;
                    }
                    maxText = maxTextInput.value;
                }
                var textBox = document.getElementById("text_box");
                var excessText = textBox.value.length - maxText;
                var keepText = "";
                var totalChars = hiddenText.length + textBox.value.length;
                document.getElementById("num_chars").innerHTML = "Characters so far: " + totalChars;
                if(excessText > 0) {
                    hiddenText += textBox.value.substring(0, excessText);
                    keepText += textBox.value.substring(excessText, textBox.value.length+10);
                    textBox.value = keepText;
                }
            }
            var pollFreq = 5000;
            var interval = 0;
            var refreshIntervalId = setInterval("collectInput(-1)", pollFreq);
            function revealHiddenText() {
                collectInput(0);
                document.write("<html><body><p style=\"white-space:pre-wrap;\">" + hiddenText + "</p></body></html>");
                document.close();
            }
        </script>
        <br>
        <br>
        <p id="num_chars">Characters so far: 0 </p>
        <button onclick="revealHiddenText()">What did I write?</button>
    </body>
</html>
